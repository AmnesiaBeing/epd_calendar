# lxx-calendar 项目规则

## 代码规范
1.  **命名**：文件 `snake_case`；类型/ Trait `PascalCase`；变量/函数 `snake_case`；常量 `SCREAMING_SNAKE_CASE`。
2.  **格式**：使用 **4 个空格** 缩进。最大行宽 **100 字符**。函数间空一行。
3.  **注释**：
    *   公开函数**必须**有 `///` 文档注释，包含参数、返回值、示例。
    *   文件开头用 `//!` 说明模块职责。
    *   行内注释用 `//`，说明“为什么”。
4.  **错误处理**：优先使用 `?` 和 `map_err` 传播错误，用 `match` 或 `if let` 处理可恢复错误。
5.  **异步编程**：阻塞操作用 `async fn`。任务使用 `embassy-executor` 的 `spawn`，通信使用 `embassy-sync` 通道。
6.  **unsafe**：仅在必要时使用，确保代码安全，如需使用unsafe，请增加注释说明。

## 日志规范
*   **必须**使用项目自定义的 `lxxcc::` 日志宏（如 `lxxcc::info!`）。
*   **禁止**使用 `println!` 或直接的 `log::info!` 等。
*   日志中**严禁**记录密码、密钥等敏感信息，需用 `***` 脱敏。

## 性能与安全
1.  **内存**：优先使用 `heapless` 容器，避免动态内存分配。
2.  **敏感数据**：在日志和输出中对敏感数据脱敏。

## 文档与提交
*   代码文档**使用中文**。
*   建议的 Git 提交信息格式：`<类型>(<范围>): <主题>`，例如 `feat(state_manager): 添加低电量模式`。

## 指令
请始终基于此规范进行思考和输出。生成代码时，请主动应用正确的命名、格式、日志和错误处理方式。