# 系统架构概览

## 核心设计理念

本系统采用**事件驱动，单核低功耗**的软件架构，基于ESP32-C6的硬件特性设计，同时预留多平台适配能力。

## 核心目标

**主CPU大部分时间处于深度睡眠状态**，仅按需被定时器或按键唤醒处理必要任务，实现超长续航。

## 技术栈

- 项目采用`cargo workspace`组织工程结构
- 核心依赖`embassy-rs`生态实现嵌入式异步驱动与低功耗管理

## 架构特点

1. **事件驱动**：基于`embassy-rs`异步通道实现事件传递
2. **低功耗优先**：主CPU深度睡眠，仅处理必要任务
3. **按需唤醒**：通过RTC定时器和按键唤醒主CPU
4. **多平台适配**：支持 ESP32-C6、泰山派(simulator)、PC模拟器

## 支持的目标平台

### 1. ESP32-C6 (esp32c6)

- **目标**：`riscv32imac-unknown-none-elf`
- **特点**：真实硬件运行，低功耗深度睡眠
- **运行命令**：`cargo besp` 或 `cargo bespr`（release）

### 2. 泰山派 (tspi)

- **目标**：`aarch64-unknown-linux-gnu`
- **特点**：运行在ARM开发板上，Linux系统调用模拟硬件
- **运行命令**：`cargo btspi` 或 `cargo btspir`（release）

### 3. PC模拟器 (simulator)

- **目标**：`x86_64-unknown-linux-gnu`
- **特点**：在PC上运行，用于开发调试，支持SDL2图形模拟
- **运行命令**：`cargo bs` 或 `cargo bsr`（release）
- **带图形**：`cargo bsg` 或 `cargo bsgr`（release）
- **运行**：`cargo rs` 或 `cargo rsr`（release）
